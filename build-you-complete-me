#!/bin/bash
set -o errexit

for pkg in \
  boost \
  clang \
  cmake \
  llvm;
do
  rpm -q $pkg || sudo yum install -y $pkg
done

TMP_DIR=`mktemp -d`
trap "rm -rf $TMP_DIR" EXIT QUIT ABRT TERM

cd $TMP_DIR
cmake -G "Unix Makefiles" . ~/.vim/plugged/YouCompleteMe/third_party/ycmd/cpp
cmake -G "Unix Makefiles" -DUSE_SYSTEM_LIBCLANG=ON . ~/.vim/plugged/YouCompleteMe/third_party/ycmd/cpp
make ycm_support_libs
